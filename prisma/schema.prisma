generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id Int @id @default(autoincrement())
  name String @db.VarChar(255)
  email String @unique @db.VarChar(255)
  password String @db.VarChar(100)
  cars Cars[]
  createdAt DateTime @default(now())
  favorites Favorites[]
}

model Cars {
  id Int @id @default(autoincrement())
  name String @db.VarChar(55)
  model String @db.VarChar(55)
  transmission TransmissionType
  carImages CarImages[]
  year String @db.VarChar(9)
  kilometersRun Float
  price Decimal @db.Decimal(10, 2)
  category CategoryType
  fuel FuelType
  city String @db.VarChar(55)
  contactPhone String @db.VarChar(55)
  description String @db.Text
  status StateType @default(disponivel)
  previousStatus StateType @default(disponivel)
  views Int @default(0)
  slug String @unique @db.VarChar(255)
  userId Int
  user Users @relation(fields: [userId], references: [id])
  favorites Favorites[]
  createdAt DateTime @default(now())
}

model CarImages {
  id Int @id @default(autoincrement())
  filename String @db.VarChar(255)
  carId Int
  car Cars @relation(fields: [carId], references: [id])
}

model Favorites {
  id Int @id @default(autoincrement())
  userId Int
  user Users @relation(fields: [userId], references: [id])
  carId Int
  car Cars @relation(fields: [carId], references: [id])
  group String? @db.VarChar(50)
  status StateType @default(disponivel)

  @@unique([userId, carId], name: "userId_carId_unique")
}

enum CategoryType {
  HATCH
  SEDAN
  SUV
  PICKUP
  CONVERSIVEL
  COUPE
  MINIVAN
  VAN
  UTILITARIO
  CROSSOVER
  ESPORTIVO
  OFFROAD
  WAGON
  OUTRO
}

enum FuelType {
  GASOLINA
  ETANOL
  FLEX
  DIESEL
  GNV
  ELETRICO
  HIBRIDO
  OUTRO
}

enum StateType {
  disponivel
  vendido
  oculto
  deletado
}

enum TransmissionType  {
  MANUAL
  AUTOMATICO
  AUTOMATIZADO
  CVT
  OUTRO
}
